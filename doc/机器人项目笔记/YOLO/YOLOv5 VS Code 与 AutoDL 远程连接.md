# YOLOv5 VS Code 与 AutoDL 远程连接

### 一、VS Code 安装与基础配置

#### 1. 安装关键步骤

- **下载渠道**：访问 VS Code 官网（[code.visualstudio.com](https://code.visualstudio.com)），点击「Download for Windows」下载安装包（无需区分版本，默认最新版即可）。

- **安装选项**：勾选以下核心选项（提升后续操作便捷性）：

    - 创建桌面快捷方式

    - 通过 Code 打开（添加到上下文菜单）：支持右键文件夹直接打开为 VS Code 项目

    - 其他推荐组件（默认勾选即可）

- **安装流程**：同意协议→选择安装路径→点击「安装」，等待完成（无需额外复杂配置）。

#### 2. 基础个性化配置

- **语言切换（中文）**：

    1. 打开 VS Code，左侧点击「扩展」（图标：🧩），搜索「Chinese (Simplified)」插件。

    2. 点击「安装」，安装完成后重启 VS Code，自动切换为中文界面。

- **主题选择**：重启后可根据喜好选择界面主题（不影响功能，仅个性化展示）。

#### 3. Python 核心插件安装

VS Code 默认仅为文本编辑器，需安装插件支持 Python 开发：

1. 左侧点击「扩展」，搜索「Python」（作者：Microsoft），点击「安装」。

2. 插件自动附带安装 Jupyter、Python 调试等相关依赖，无需额外手动安装。

3. 安装完成后，左侧将显示「Get Started with Python Development」，表明插件配置成功。

### 二、本地 YOLOv5 项目配置（解释器+终端）

#### 1. 打开本地项目

- **两种方式**：

    1. 右键 YOLOv5 项目文件夹（如 `yolov5-master`），选择「通过 Code 打开」，直接加载项目。

    2. 打开 VS Code→点击「文件」→「打开文件夹」，选择项目路径加载。

- **安全提示**：首次打开将提示「是否信任此文件夹」，点击「信任」即可正常编辑（避免恶意脚本风险）。

#### 2. 解释器配置（切换至 yolov5 虚拟环境）

```Python

# 核心操作步骤（无代码，纯界面操作）
1. 打开项目后，右下角显示当前解释器（默认可能为 Conda base 环境，如「3.8.15 (base)」）。
2. 点击右下角解释器名称，弹出环境列表，选择 yolov5 虚拟环境（如「3.8.16 (yolov5)」）。
3. 若未找到 yolov5 环境：
   - 点击「输入解释器路径」→「浏览」，找到 yolov5 环境的 Python 可执行文件：
     路径示例：C:\Users\用户名\Miniconda3\envs\yolov5\python.exe
   - 选择后自动切换，右下角显示「3.8.16 (yolov5)」即为配置成功。
```

- **验证效果**：右键 `detect.py`→「运行Python文件」，终端输出检测结果，且结果保存至 `runs/detect/EXPx`，说明解释器配置成功。

#### 3. 终端设置（解决 Conda 环境激活问题）

##### （1）默认终端问题

VS Code 默认终端为 PowerShell，无法正常激活 Conda 环境（前缀无 `(yolov5)` 标识），导致 `pip install` 安装的依赖无法导入，需切换至 CMD 终端。

##### （2）终端切换与默认配置

```Python

# 核心操作步骤（无代码，纯界面操作）
1. 打开终端：点击「终端」→「新建终端」（默认启动 PowerShell，前缀显示「PS」）。
2. 临时切换 CMD：点击终端右上角「▼」→「Command Prompt」，新建 CMD 终端（自动激活 yolov5 环境，前缀显示 `(yolov5)`）。
3. 设置 CMD 为默认终端（永久生效）：
   - 点击终端右上角「▼」→「选择默认配置文件」→「Command Prompt」。
   - 关闭当前所有终端，重新新建终端，默认启动 CMD 且自动激活 yolov5 环境。
```

- **验证效果**：在 CMD 终端执行 `pip install jieba`，安装后在 Python 代码中 `import jieba` 无报错，说明配置成功。

### 三、VS Code 远程连接 AutoDL 服务器

#### 1. 前置准备

- 启动 AutoDL 服务器实例（参考第九章），获取「SSH 登录指令」和「登录密码」（AutoDL 控制台可直接复制）。

- 确保 VS Code 已安装「Remote - SSH」插件。

#### 2. 安装 Remote SSH 插件

1. 左侧点击「扩展」，搜索「Remote - SSH」（作者：Microsoft），点击「安装」。

2. 安装完成后，左下角将显示「远程窗口」图标，表明插件就绪。

#### 3. SSH 连接配置

```Python

# 核心操作步骤（无代码，纯界面操作）
1. 点击左下角「远程窗口」图标→「连接到主机」→「添加新的 SSH 主机」。
2. 粘贴 AutoDL 「SSH 登录指令」（示例：ssh root@region-xxx.autodl.com -p 215583），回车。
3. 选择 SSH 配置文件保存路径（默认选择第一个即可），点击「保存」。
4. 再次点击「连接到主机」，选择刚添加的 SSH 主机，弹出选择系统类型，点击「Linux」。
5. 输入 AutoDL 登录密码（可从控制台复制「登录密码」），回车。
6. 提示「成功连接」后，远程连接建立完成。
```

#### 4. 打开服务器项目与运行代码

```Python

# 核心操作步骤（无代码，纯界面操作）
1. 连接成功后，点击「打开文件夹」→ 选择服务器上的项目路径（如 `/root/yolov5-master`）→ 输入密码确认。
2. 服务器项目加载完成后，需安装 Python 扩展到服务器：
   - 左侧点击「扩展」→ 找到「Python」插件→ 点击「在 SSH: xxx 上安装」（避免本地插件未同步）。
3. 运行远程代码：
   - 右键 `detect.py`→「运行Python文件」，终端将在服务器上执行代码，检测结果保存至服务器 `runs/detect/EXPx`。
   - 若插件安装失败（服务器网络问题），可在远程终端执行命令运行：
     ```bash
     python detect.py
```
```

### 四、远程文件操作与 Jupyter 使用

#### 1. 服务器文件下载（训练结果同步至本地）

服务器端训练/检测结果不会自动同步至本地，需手动下载：

```Python

# 核心操作步骤（无代码，纯界面操作）
1. 在 VS Code 左侧「资源管理器」中，找到服务器上的目标文件夹（如 `/root/yolov5-master/runs/train/EXP4`）。
2. 右键该文件夹→ 选择「下载」，指定本地保存路径（如桌面）。
3. 等待下载完成，即可在本地查看服务器端结果（文件夹结构与服务器一致）。
```

#### 2. 本地文件上传至服务器

- 直接拖拽本地文件（如数据集、配置文件）至 VS Code 左侧服务器项目的目标路径，即可自动上传。

- 上传完成后，服务器端对应路径将显示该文件，无需额外操作。

#### 3. Jupyter Notebook 使用（服务器/本地均可）

```Python

# 核心操作步骤（无代码，纯界面操作）
1. 新建 Jupyter 文件：点击「文件」→「新建文件」→ 选择「Jupyter Notebook」→ 命名为 `demo.ipynb`。
2. 选择内核：点击文件右上角「选择内核」→ 选择 yolov5 环境（本地/远程均可，远程需已连接服务器）。
3. 运行代码块：输入代码（如 `print("Hello YOLOv5")`），按 `Shift+Enter` 运行，正常输出即为配置成功。
4. 若内核选择失败（新环境）：在终端执行 `pip install jupyter lab`，安装后重新选择内核。
```

### 五、整体流程回顾

1. VS Code 安装（勾选关键选项）→ 中文语言+Python 插件安装→ 本地项目打开→ 解释器切换（yolov5 环境）→ 终端切换（CMD）。

2. Remote SSH 插件安装→ SSH 连接配置（AutoDL 主机/端口/密码）→ 服务器项目加载→ 远程 Python 插件安装→ 代码运行。

3. 服务器文件下载/本地文件上传→ Jupyter Notebook 配置与使用。